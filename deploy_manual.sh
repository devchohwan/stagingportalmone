#!/bin/bash

echo "ğŸš€ Portal Monemusic ìˆ˜ë™ ë°°í¬ ê°€ì´ë“œ"
echo "========================================"
echo ""
echo "1. ì„œë²„ ì ‘ì†:"
echo "   ssh -i ~/monemusic root@115.68.195.125"
echo ""
echo "2. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™ (ì—†ìœ¼ë©´ clone):"
echo "   # ë””ë ‰í† ë¦¬ê°€ ìˆëŠ”ì§€ í™•ì¸"
echo "   ls /root/portal-monemusic"
echo "   "
echo "   # ì—†ìœ¼ë©´ clone"
echo "   cd /root"
echo "   git clone https://github.com/devchohwan/portal_monemusic.git portal-monemusic"
echo "   "
echo "   # ìˆìœ¼ë©´ pull"
echo "   cd /root/portal-monemusic"
echo "   git pull origin main"
echo ""
echo "3. Docker ì´ë¯¸ì§€ ë¹Œë“œ:"
echo "   docker build -t amuguona/portal-monemusic:manual-fix ."
echo ""
echo "4. Docker Hubì— í‘¸ì‹œ (ì„ íƒì‚¬í•­):"
echo "   docker push amuguona/portal-monemusic:manual-fix"
echo ""
echo "5. ê¸°ì¡´ ì»¨í…Œì´ë„ˆ ì¤‘ì§€ ë° ì‚­ì œ:"
echo "   docker stop portal-monemusic-manual"
echo "   docker rm portal-monemusic-manual"
echo ""
echo "6. ìƒˆ ì»¨í…Œì´ë„ˆ ì‹¤í–‰:"
echo "   docker run -d \\"
echo "     --name portal-monemusic-manual \\"
echo "     --network kamal \\"
echo "     -v portal_monemusic_storage:/rails/storage \\"
echo "     -e RAILS_MASTER_KEY=d852cbb93057373a82518521ec2e24a0 \\"
echo "     -e RAILS_ENV=production \\"
echo "     -e SOLAPI_API_KEY=your_api_key \\"
echo "     -e SOLAPI_API_SECRET=your_api_secret \\"
echo "     -e SOLAPI_SENDER=ë°œì‹ ë²ˆí˜¸ \\"
echo "     --entrypoint '' \\"
echo "     amuguona/portal-monemusic:manual-fix \\"
echo "     ./bin/thrust ./bin/rails server"
echo ""
echo "7. ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰:"
echo "   docker exec portal-monemusic-manual /rails/bin/rails db:migrate RAILS_ENV=production"
echo ""
echo "8. ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸:"
echo "   docker ps | grep portal-monemusic-manual"
echo ""
echo "9. ë¡œê·¸ í™•ì¸:"
echo "   docker logs -f portal-monemusic-manual --tail 50"
echo ""
echo "========================================"
echo "âœ… ë°°í¬ ì™„ë£Œ í›„ í™•ì¸: https://portal.monemusic.com"